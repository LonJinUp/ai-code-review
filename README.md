# AI Code Review

ä¸€ä¸ªåŸºäºAIçš„æ™ºèƒ½ä»£ç å®¡æ ¸å·¥å…·ï¼Œå¯ä»¥è‡ªåŠ¨åˆ†æ Git ä»£ç å˜æ›´ï¼Œæä¾›ä¸“ä¸šçš„ä»£ç å®¡æŸ¥å»ºè®®ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- ğŸ¤– **AI é©±åŠ¨**ï¼šä½¿ç”¨å¤§æ¨¡å‹è¿›è¡Œæ™ºèƒ½ä»£ç å®¡æ ¸
- ğŸ“ **çµæ´»å®¡æ ¸**ï¼šæ”¯æŒå®¡æ ¸æœªæäº¤çš„æ›´æ”¹ï¼ˆé»˜è®¤ï¼‰å’Œå·²æäº¤çš„ä»£ç 
- ğŸ“‹ **è‡ªå®šä¹‰è§„èŒƒ**ï¼šæ”¯æŒè‡ªå®šä¹‰ä»£ç å®¡æ ¸è§„èŒƒæ–‡ä»¶
- ğŸ’¾ **é…ç½®ç®¡ç†**ï¼šæ”¯æŒé…ç½®æ–‡ä»¶ã€ç¯å¢ƒå˜é‡ã€å‘½ä»¤è¡Œå‚æ•°å¤šç§é…ç½®æ–¹å¼
- ğŸ“Š **æŠ¥å‘Šç”Ÿæˆ**ï¼šè‡ªåŠ¨ç”Ÿæˆè¯¦ç»†çš„ Markdown æ ¼å¼å®¡æ ¸æŠ¥å‘Š
- ğŸ¯ **å¼€ç®±å³ç”¨**ï¼šé¦–æ¬¡ä½¿ç”¨è‡ªåŠ¨å¼•å¯¼é…ç½®ï¼Œæ— éœ€ç¹çè®¾ç½®

## ğŸ“¦ å®‰è£…

### å…¨å±€å®‰è£… ğŸŒŸæ¨è

npm install -g @lonjin/ai-review

### æœ¬åœ°å®‰è£…

npm install @lonjin/ai-review

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. é¦–æ¬¡é…ç½®

é¦–æ¬¡ä½¿ç”¨æ—¶ï¼Œå·¥å…·ä¼šè‡ªåŠ¨å¼•å¯¼ä½ é…ç½® API å‚æ•°ï¼š

```bash
ai-review
```

æˆ–è€…æ‰‹åŠ¨è§¦å‘é…ç½®æµç¨‹ï¼š

```bash
ai-review --setup
```

### 2.åˆ›å»ºé¡¹ç›®è§„åˆ™æ–‡ä»¶ï¼š

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `code_review_rules.md` æ–‡ä»¶å³å¯ä½¿ç”¨è‡ªå®šä¹‰è§„èŒƒï¼Œå¯ä»¥å‚è€ƒ [code_review_rules.md](https://github.com/LonJinUp/ai-code-review/blob/master/templates/code_review_rules.md) æ–‡ä»¶ã€‚

### 3. å®¡æ ¸ä»£ç 

**å®¡æ ¸æœªæäº¤çš„æ›´æ”¹ï¼ˆé»˜è®¤ï¼‰**ï¼š

```bash
ai-review
```

**å®¡æ ¸æœ€æ–°æäº¤**ï¼š

```bash
ai-review --commit
```

å®¡æ ¸å®Œæˆåï¼Œç»“æœä¼šä¿å­˜åœ¨ `./ai_review_result.md` æ–‡ä»¶ä¸­ã€‚

## ğŸ“– ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬å‘½ä»¤

```bash
# å®¡æ ¸æœªæäº¤çš„æ›´æ”¹ï¼ˆé»˜è®¤ï¼‰
ai-review

# å®¡æ ¸æœ€æ–°æäº¤
ai-review --commit

# æŒ‡å®šè‡ªå®šä¹‰å®¡æ ¸è§„èŒƒæ–‡ä»¶
ai-review -r ./my-review-rules.md

# æŒ‡å®šè¾“å‡ºæ–‡ä»¶è·¯å¾„
ai-review -o ./review-report.md
```

### å‘½ä»¤è¡Œé€‰é¡¹

| é€‰é¡¹ | ç®€å†™ | è¯´æ˜ |
|------|-------|------|
| `--api-key <key>` | `-k` | API å¯†é’¥ |
| `--api-url <url>` | `-u` | API åœ°å€ï¼ˆé»˜è®¤ä¸º `https://api.deepseek.com/chat/completions`ï¼‰ |
| `--model <name>` | `-m` | æ¨¡å‹åç§°ï¼ˆé»˜è®¤ä¸º `deepseek-chat`ï¼‰ |
| `--rules <path>` | `-r` | è‡ªå®šä¹‰å®¡æ ¸è§„èŒƒæ–‡ä»¶è·¯å¾„ |
| `--output <path>` | `-o` | è¾“å‡ºæ–‡ä»¶è·¯å¾„ï¼ˆé»˜è®¤ä¸º `./ai_review_result.md`ï¼‰ |
| `--commit` | | å®¡æ ¸æœ€æ–°æäº¤ï¼ˆé»˜è®¤å®¡æ ¸æœªæäº¤çš„æ›´æ”¹ï¼‰ |
| `--setup` | | é‡æ–°é…ç½® API å‚æ•° |

### é…ç½®æ–¹å¼

æ”¯æŒå¤šç§é…ç½®æ–¹å¼ï¼Œä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼š

1. **å‘½ä»¤è¡Œå‚æ•°**ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰
2. **ç¯å¢ƒå˜é‡**
3. **é…ç½®æ–‡ä»¶**ï¼ˆ`~/.ai-code-review/config.json`ï¼‰
4. **é»˜è®¤å€¼**ï¼ˆæœ€ä½ä¼˜å…ˆçº§ï¼‰

#### ç¯å¢ƒå˜é‡é…ç½®

```bash
export DEEPSEEK_API_KEY="your-api-key"
export DEEPSEEK_API_URL="https://api.deepseek.com/chat/completions"
export DEEPSEEK_MODEL="deepseek-chat"
```

#### é…ç½®æ–‡ä»¶

é…ç½®æ–‡ä»¶ä½ç½®ï¼š`~/.ai-code-review/config.json`

```json
{
  "apiUrl": "https://api.deepseek.com/chat/completions",
  "model": "deepseek-chat",
  "apiKey": "your-api-key"
}
```

### è‡ªå®šä¹‰å®¡æ ¸è§„èŒƒ

å·¥å…·ä¼šæŒ‰ä»¥ä¸‹ä¼˜å…ˆçº§æŸ¥æ‰¾å®¡æ ¸è§„èŒƒæ–‡ä»¶ï¼š

1. **é¡¹ç›®æ ¹ç›®å½•**ï¼š`./code_review_rules.md`
2. **å‘½ä»¤è¡ŒæŒ‡å®š**ï¼š`-r <path>`
3. **åŒ…å†…é»˜è®¤è§„èŒƒ**ï¼š`templates/code_review_rules.md`

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `code_review_rules.md` æ–‡ä»¶å³å¯ä½¿ç”¨è‡ªå®šä¹‰è§„èŒƒï¼š

```markdown
# ä»£ç å®¡æ ¸è§„èŒƒ

## é€šç”¨è§„èŒƒ
1. ä»£ç é£æ ¼ä¸€è‡´æ€§
2. å‘½åè§„èŒƒ
3. å‡½æ•°å•ä¸€èŒè´£åŸåˆ™
...
```

## ğŸ“ å®¡æ ¸æ¨¡å¼è¯´æ˜

### æœªæäº¤æ›´æ”¹æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰

å®¡æ ¸å½“å‰å·¥ä½œç›®å½•ä¸­æ‰€æœ‰æœªæäº¤çš„æ›´æ”¹ï¼ŒåŒ…æ‹¬ï¼š
- **å·²æš‚å­˜çš„æ›´æ”¹**ï¼ˆStagedï¼‰ï¼šä½¿ç”¨ `git add` æ·»åŠ åˆ°æš‚å­˜åŒºçš„æ–‡ä»¶
- **æœªæš‚å­˜çš„æ›´æ”¹**ï¼ˆUnstagedï¼‰ï¼šå·¥ä½œç›®å½•ä¸­å·²ä¿®æ”¹ä½†æœªæš‚å­˜çš„æ–‡ä»¶

```bash
ai-review
```

### å·²æäº¤ä»£ç æ¨¡å¼

å®¡æ ¸å½“å‰åˆ†æ”¯æœ€æ–°ä¸€æ¬¡æäº¤çš„ä»£ç å˜æ›´ï¼š

```bash
ai-review --commit
```

## ğŸ“„ è¾“å‡ºç¤ºä¾‹

å®¡æ ¸æŠ¥å‘Šä¼šåŒ…å«ï¼š
- ä»£ç è§„èŒƒè¿åæƒ…å†µ
- æ½œåœ¨é—®é¢˜åˆ†æ
- ä¼˜åŒ–å»ºè®®
- å‘½åã€é€»è¾‘ã€æ€§èƒ½ç­‰æ–¹é¢çš„ä¸“ä¸šå»ºè®®

æŠ¥å‘Šä»¥ Markdown æ ¼å¼ä¿å­˜ï¼Œæ–¹ä¾¿é˜…è¯»å’Œåˆ†äº«ã€‚

## ğŸ”§ è·å–API Key

> è¿™é‡Œåªç”¨DeepSeekä½œä¸ºæ¼”ç¤ºï¼Œä¹Ÿå¯ä»¥ç”¨å…¶ä»–å®¶çš„APIï¼Œ

1. è®¿é—® [DeepSeek å®˜ç½‘](https://www.deepseek.com/)
2. æ³¨å†Œè´¦å·å¹¶ç™»å½•
3. è¿›å…¥ API ç®¡ç†é¡µé¢
4. åˆ›å»º API Key
5. å°† API Key é…ç½®åˆ°å·¥å…·ä¸­

ğŸŒŸğŸŒŸğŸŒŸæ¨èä½¿ç”¨ç¬¬ä¸‰æ–¹èšåˆAPIï¼Œå¦‚ **[yunwu.ai](https://yunwu.ai/register?aff=QqnB)**ï¼Œè´¹ç‡æ›´ä½ï¼Œæ¨¡å‹é½å…¨ã€‚

## ğŸ“‹ ç³»ç»Ÿè¦æ±‚

- Node.js >= 14.0.0
- Git ä»“åº“ç¯å¢ƒ

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ”— ç›¸å…³é“¾æ¥

- [DeepSeek API æ–‡æ¡£](https://platform.deepseek.com/api-docs/)
- [é¡¹ç›® Issues](https://github.com/LonJinUp/ai-code-review/issues)

---

**æ³¨æ„**ï¼šä½¿ç”¨æœ¬å·¥å…·éœ€è¦æœ‰æ•ˆçš„API Keyï¼Œè¯·ç¡®ä¿è´¦æˆ·æœ‰è¶³å¤Ÿçš„ä½™é¢ã€‚